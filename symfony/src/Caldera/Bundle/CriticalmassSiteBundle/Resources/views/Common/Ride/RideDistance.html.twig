{% set distance = ride.getEstimatedDistance() %}
{% set blockSize = 5 %}

{% if distance > 0 %}
    {% set distancePerBlock = 5 %}
    {% set blocksPerRow = 10 %}
    
    {% set blocks = distance // distancePerBlock %}
    {% set remainder = distance % distancePerBlock %}
    
    {% set rows = distance // (blocksPerRow * distancePerBlock) %}

<svg width="{{ blocksPerRow * 11 - 1 }}px" height="{{ (rows + 1) * 11 }}px">
    {% if rows > 0 %}
        {% for y in 0..(rows - 1) %}
            {% for x in 0..(blocksPerRow - 1) %}
                <rect x="{{ (x * 10 + x) }}px" y="{{ (y * 10 + y) }}px" width="10px" height="10px" fill="#000000"></rect>
            {% endfor %}
        {% endfor %}
    {% endif %}
    
    {% set remainingBlocks = (blocks - rows * blocksPerRow * distancePerBlock) % blocksPerRow %}
    {% if remainingBlocks > 0 %}
        {% for x in 0..(remainingBlocks - 1) %}
            <rect x="{{ (x * 10 + x) }}px" y="{{ (rows * 11) }}px" width="10px" height="10px" fill="#ff0000"></rect>
        {% endfor %}
    {% endif %}
        
    {% set remainderWidth = 0.1 * remainder %}
    <rect x="{{ (remainingBlocks * 11) }}px" y="{{ (rows * 11) }}px" width="{{ remainderWidth }}px" height="10px" fill="#00ff00"></rect>
</svg>
{% endif %}