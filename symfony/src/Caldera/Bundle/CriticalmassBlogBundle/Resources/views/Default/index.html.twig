{% extends 'CalderaCriticalmassBlogBundle:Template:MasterTemplate.html.twig' %}

{% block title %}{{ blog.title }}{% endblock %}

{% block content %}
    <div class="blog-index blog container m-t-3">
        <div class="row">
            <div class="col-xs-12 text-xs-center">
                <h1 class="display-2">
                    <a href="{{ path(routes.blogHomepage) }}">
                        {{ blog.title }}
                    </a>
                </h1>

                <p class="lead">
                    {{ blog.description }}
                </p>
            </div>
        </div>

        {% for post in posts %}
            <div class="row m-t-3">
                <div class="col-xs-12 col-sm-10 offset-sm-1">
                    <div class="row">
                        <div class="row m-t-3">
                            <div class="col-xs-12 col-sm-10 text-xs-center">
                                {% if post.claim %}
                                    <p class="m-b-0">
                                        {{ post.claim }}
                                    </p>
                                {% endif %}

                                <h2>
                                    <a href="{{ path(routes.blogPost, { slug: post.slug }) }}">
                                        {{ post.title }}
                                    </a>
                                </h2>
                            </div>
                        </div>
                    </div>

                    <div class="row m-t-2">
                        <div class="col-xs-12 col-sm-10">
                            {% if post.abstract %}
                                {{ post.abstract | markdown }}

                                <a href="{{ path(routes.blogPost, { slug: post.slug }) }}"
                                   class="btn btn-secondary m-x-auto" style="width: 150px; display: block;">
                                    <i class="fa fa-book" aria-hidden="true"></i>
                                    Weiterlesen
                                </a>
                            {% else %}
                                <article>
                                    {{ post.text | markdown }}
                                </article>
                            {% endif %}
                        </div>

                        <div class="hidden-xs-down col-sm-2">
                            <div class="row">
                                <div class="col-sm-12 text-sm-center">
                                    <img src="{{ gravatarUrl(post.user, 256) }}" class="img-circle img-fluid"/>
                                </div>
                            </div>

                            <div class="row m-t-2">
                                <div class="col-sm-12 text-sm-center">
                                    {{ post.user.username }}
                                    <br/>
                                    {{ post.dateTime | date('d.m.Y') }}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


        {% endfor %}
    </div>
{% endblock %}