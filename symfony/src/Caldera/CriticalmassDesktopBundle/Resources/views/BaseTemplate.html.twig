<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>criticalmass.in</title>

    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">

    {% stylesheets
    '@CalderaCriticalmassCoreBundle/Resources/public/css/external/*.css'
    '@CalderaCriticalmassDesktopBundle/Resources/public/css/external/*.css'
    '@CalderaCriticalmassDesktopBundle/Resources/public/css/*.css'
    filter="cssrewrite" %}
    <link rel="stylesheet" href="{{ asset_url }}" type="text/css" />
    {% endstylesheets %}

    <link rel="apple-touch-icon" sizes="76x76" href="assets/img/favicon-76.png">
    <link rel="apple-touch-icon" sizes="120x120" href="assets/img/favicon-120.png">
    <link rel="apple-touch-icon" sizes="152x152" href="assets/img/favicon-152.png">
    <link rel="icon" sizes="196x196" href="assets/img/favicon-196.png">
    <link rel="icon" type="image/x-icon" href="assets/img/favicon.ico">

    <script>
        var cityslug = null;

        window.onload = function()
        {
            function loadingCompletedCallback()
            {
                if (CallbackHell.hasEventListenerBeenFired('cityListRefreshed') &&
                        CallbackHell.hasEventListenerBeenFired('rideListRefreshed') &&
                        CallbackHell.hasEventListenerBeenFired('tileLayerListRefreshed')
                        )
                {
                    {% if citySlug is defined %}
                    citySlug = '{{ citySlug }}';
                    {% endif %}

                    initApp();

                    {% if citySlug is defined %}
                    showCityInfo('{{ citySlug }}');
                    {% endif %}
                }
            }

            CallbackHell.registerEventListener('cityListRefreshed', loadingCompletedCallback);
            CallbackHell.registerEventListener('rideListRefreshed', loadingCompletedCallback);
            CallbackHell.registerEventListener('tileLayerListRefreshed', loadingCompletedCallback);

            CityFactory.refreshAllStoredCities();
            RideFactory.refreshAllStoredRides();
            TileLayerFactory.refreshAllStoredTileLayers();
        };
    </script>
</head>

<body>
<div role="navigation" class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>

        <a class="navbar-brand" href="#">criticalmass.in</a>
    </div>

    <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
            <li><a href="#" data-toggle="collapse" data-target=".navbar-collapse.in" onclick="sidebar.toggle(); return false;"><i class="fa fa-list" style="color: white"></i>&nbsp;&nbsp;Städte</a></li>
            <li><a href="#" data-toggle="collapse" data-target=".navbar-collapse.in" onclick="$('#aboutModal').modal('show'); return false;"><i class="fa fa-globe" style="color: white"></i>&nbsp;&nbsp;Critical Mass</a></li>
            <li><a href="#" data-toggle="collapse" data-target=".navbar-collapse.in" onclick="$('#glympseModal').modal('show'); return false;"><i class="fa fa-dashboard" style="color: white"></i>&nbsp;&nbsp;Live-Tracking</a></li>
            <li><a href="#" data-toggle="collapse" data-target=".navbar-collapse.in" onclick="$('#aboutModal').modal('show'); return false;"><i class="fa fa-question-circle" style="color: white"></i>&nbsp;&nbsp;Über uns</a></li>
            <li><a href="#" data-toggle="collapse" data-target=".navbar-collapse.in" onclick="$('#loginModal').modal('show'); return false;"><i class="fa fa-user" style="color: white"></i>&nbsp;&nbsp;Dein Profil</a></li>
        </ul>
    </div>
</div>

<div id="map">
    <div id="glympseLogoContainer">
        <a href="http://www.glympse.com/">
            <img id="glympseLogo" src="/bundles/calderacriticalmasscore/images/glympse/glympse-150.png" />
        </a>
    </div>
</div>

<div id="sidebar">
    <div class="sidebar-wrapper">
        <div class="panel panel-default" style="margin: 0px; border: none; border-radius: 0px; -webkit-box-shadow: none; box-shadow: none;">
            <div class="panel-heading">
                <h3 class="panel-title" style="display: inline;">Critical Mass<button type="button" class="btn btn-xs btn-default pull-right" onclick="sidebar.hide();"><i class="fa fa-chevron-left"></i></button></h3>
            </div>
            <div class="panel-body">
                <div class="sidebar-table">
                    <table class="table table-hover" id="theater-table">
                        <tbody class="list" id="cityList">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

{% include 'CalderaCriticalmassDesktopBundle:Modal:aboutModal.html.twig' %}

<div class="modal fade" id="loginModal" tabindex="-1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Login</h4>
            </div>
            <div class="modal-body">
                <ul class="nav nav-tabs" id="loginTabs">
                    <li class="active"><a href="#loginTabsLogin" data-toggle="tab"><i class="fa fa-question-circle"></i>&nbsp;Anmelden</a></li>
                    <li><a href="#loginTabsRegister" data-toggle="tab"><i class="fa fa-envelope"></i>&nbsp;Registrieren</a></li>
                    <li><a href="#loginTabsPassword" data-toggle="tab"><i class="fa fa-exclamation-circle"></i>&nbsp;Kennwort vergessen</a></li>
                </ul>
                <div class="tab-content" id="loginTabsContent" style="padding-top: 10px;">
                    <div id="loginTabsLogin" class="tab-pane fade active in">
                        {% block fos_user_login %}
                            {% render controller("SonataUserBundle:SecurityFOSUser1:login") %}
                        {% endblock %}
                    </div>

                    <div id="loginTabsRegister" class="tab-pane fade">
                        {% block sonata_user_registration %}
                            {% render controller("SonataUserBundle:RegistrationFOSUser1:register") %}
                        {% endblock %}
                    </div>

                    <div id="loginTabsPassword" class="tab-pane fade">
                        {% block fos_user_resetting %}
                            {% render controller("SonataUserBundle:ResettingFOSUser1:request") %}
                        {% endblock %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="cityInfoModal" tabindex="-1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close" type="button" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title text-primary" id="cityModalTitle"></h4>
            </div>
            <div class="modal-body" id="cityModalBody">
                <ul class="nav nav-tabs" id="cityModalTabs">
                    <li class="active"><a href="#cityModalInfoTab" data-toggle="tab"><i class="fa fa-question-circle"></i>&nbsp;Stadtinfo</a></li>
                    <li><a href="#cityModalRideTab" data-toggle="tab"><i class="fa fa-envelope"></i>&nbsp;Nächste Tour</a></li>
                </ul>

                <div class="tab-content" id="cityModalTabsContent" style="padding-top: 10px;">
                    <div class="tab-pane fade active in" id="cityModalInfoTab">
                        <div class="jumbotron" id="cityModalTabInfoJumbotron">
                            <h2 id="cityModalTabInfoJumbotronTitle">Hello, world!</h2>
                        </div>

                        <h2 id="cityModalTabInfoTitle">Hello, world!</h2>
                        <p id="cityModalTabInfoDescription"></p>
                        <div id="cityModalTabInfoSocialMedia" class="btn-group"></div>
                    </div>

                    <div id="cityModalRideTab" class="tab-pane fade">
                        <div id="cityModalTabNextRideKnown">
                            <div class="jumbotron" id="cityModalTabNextRideJumbotron">
                                <h2 id="cityModalTabNextRideJumbotronTitle" style="color: white; text-shadow: black 0 0 3px;">Hello, world!</h2>
                            </div>

                            <h2 id="cityModalTabNextRideTitle"></h2>
                            <p id="cityModalTabNextRideDescription"></p>

                            <div class="row">
                                <div class="col-md-12" id="cityModalTabNextRideLocation"><strong>Treffpunkt:</strong> <span></span></div>
                            </div>
                            <div class="row">
                                <div class="col-md-6" id="cityModalTabNextRideDate"><strong>Datum:</strong> <time></time></div>
                                <div class="col-md-6" id="cityModalTabNextRideTime"><strong>Uhrzeit:</strong> <time></time></strong></div>
                            </div>

                            <div id="cityModalTabNextRideSocialMedia" class="btn-group"></div>
                            </div>
                        <div id="cityModalTabNextRideUnknown">
                            <div class="alert alert-info" role="alert">Schade — zu dieser Stadt sind uns keine Fahrten bekannt :( Aber wenn du mehr weißt als wir: Schreib uns bitte unter <a href="mailto:ride@criticalmass.in">ride@criticalmass.in</a>!</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="glympseModal" tabindex="-1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close" type="button" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">
                    Schick uns deinen Glympse!
                </h4>
            </div>
            <div class="modal-body">
                <p>Wir wollen wissen, wo du bist! Ein ganz wichtiger Bestandteil von criticalmass.in ist das so genannte Live-Tracking, mit dem du deinen Aufenthaltsort während einer Critical-Mass-Radtour auf unserer Karte anzeigen lassen kannst.</p>
                <p>Einerseits hilfst du mit deiner Teilnahme am Tracking den Teilnehmern, die es nicht rechtzeitig zum Treffpunkt schaffen, den Hungrigen und Durstigen, die zwischendurch an einer Tankstelle anhalten, und den Corkern, die über eine Abkürzung wieder an die Spitze fahren wollen, wieder zur Masse zu finden. Andererseits hilft uns dein Track bei der Erstellung interessanter Statistiken und Heatmaps, die nicht nur gut aussehen, sondern auch interessante Informationen über die Critical Mass in deiner Stadt verraten.</p>
                <p>Zur Teilname am Live-Tracking brauchst du lediglich die Glympse-App, die es kostenlos für iOS und Android gibt:</p>

                <div class="text-center">
                    <div class="btn-group">
                        <button type="button" class="btn btn-default" href="https://itunes.apple.com/de/app/glympse-zeig-deinen-freunden/id330316698">Glympse für iOS</button>
                        <button type="button" class="btn btn-default" href="https://play.google.com/store/apps/details?id=com.glympse.android.glympse&hl=de">Glympse für Android</button>
                    </div>
                </div>

                <p>Du musst dich zur Teilnahme am Tracking weder auf criticalmass.in noch bei Glympse registrieren! Es ist ganz einfach:</p>

                <ol>
                    <li>Erstelle in der Glympse-App einen neuen Glympse über vier Stunden.</li>
                    <li>Lade uns ein: Schicke uns aus der App heraus eine Einladung an <code><strong>deine-stadt</strong>@criticalmass.in</code>, also <code>hamburg@criticalmass.in</code> für die Hamburger Critical Mass oder <code>berlin@criticalmass.in</code> für die Berliner Critical Mass.</li>
                    <li>Fahre los! Wir fragen Glympse in regelmäßigen Abständen nach deinem aktuellen Aufenthaltsort und zeichnen dich in unserer Karte ein.</li>
                </ol>
                <p>Achte bitte darauf, dass dein Glympse nicht zu früh abläuft: Im „Notfall“ kannst du auf der Übersichtsseite in der Glympse-App deinen Glympse verlängern. Andererseits solltest du deinen Glympse recht bald nach Ende der Tour löschen. Deine Position wird fünf Minuten später aus der Karte gelöscht.</p>
            </div>
        </div>
    </div>
</div>

{% javascripts '@CalderaCriticalmassCoreBundle/Resources/public/js/external/*'
'@CalderaCriticalmassCoreBundle/Resources/public/js/*'
'@CalderaCriticalmassCoreBundle/Resources/public/js/factories/*'
'@CalderaCriticalmassCoreBundle/Resources/public/js/entities/*'
'@CalderaCriticalmassDesktopBundle/Resources/public/js/external/bootstrap.min.js'
'@CalderaCriticalmassDesktopBundle/Resources/public/js/external/L.activearea.js'
'@CalderaCriticalmassDesktopBundle/Resources/public/js/external/L.Control.Sidebar.js'
'@CalderaCriticalmassDesktopBundle/Resources/public/js/external/leaflet.groupedlayercontrol.js'
'@CalderaCriticalmassDesktopBundle/Resources/public/js/*'
%}
<script type="text/javascript" src="{{ asset_url }}"></script>
{% endjavascripts %}
</body>
</html>
