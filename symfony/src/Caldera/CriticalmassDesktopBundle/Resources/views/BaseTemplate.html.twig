<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>criticalmass.in</title>

    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">

    {% stylesheets
    '@CalderaCriticalmassCoreBundle/Resources/public/css/external/*.css'
    '@CalderaCriticalmassDesktopBundle/Resources/public/css/external/*.css'
    '@CalderaCriticalmassDesktopBundle/Resources/public/css/*.css'
    filter="cssrewrite" %}
    <link rel="stylesheet" href="{{ asset_url }}" type="text/css" />
    {% endstylesheets %}

    <link rel="apple-touch-icon" sizes="76x76" href="assets/img/favicon-76.png">
    <link rel="apple-touch-icon" sizes="120x120" href="assets/img/favicon-120.png">
    <link rel="apple-touch-icon" sizes="152x152" href="assets/img/favicon-152.png">
    <link rel="icon" sizes="196x196" href="assets/img/favicon-196.png">
    <link rel="icon" type="image/x-icon" href="assets/img/favicon.ico">

    <script>
        var cityslug = null;

        window.onload = function()
        {
            function loadingCompletedCallback()
            {
                if (CallbackHell.hasEventListenerBeenFired('cityListRefreshed') &&
                        CallbackHell.hasEventListenerBeenFired('rideListRefreshed') &&
                        CallbackHell.hasEventListenerBeenFired('tileLayerListRefreshed')
                        )
                {
                    {% if citySlug is defined %}
                    citySlug = '{{ citySlug }}';
                    {% endif %}

                    initApp();

                    {% if citySlug is defined %}
                    showCityInfo('{{ citySlug }}');
                    {% endif %}
                }
            }

            CallbackHell.registerEventListener('cityListRefreshed', loadingCompletedCallback);
            CallbackHell.registerEventListener('rideListRefreshed', loadingCompletedCallback);
            CallbackHell.registerEventListener('tileLayerListRefreshed', loadingCompletedCallback);

            CityFactory.refreshAllStoredCities();
            RideFactory.refreshAllStoredRides();
            TileLayerFactory.refreshAllStoredTileLayers();
        };
    </script>
</head>

<body>
<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#">criticalmass.in</a>
    </div>
    <div class="navbar-collapse collapse">
        <form class="navbar-form navbar-right" role="form">
            <div class="form-group">
                <input type="text" placeholder="Benutzername" class="form-control">
            </div>
            <div class="form-group">
                <input type="password" placeholder="Kennwort" class="form-control">
            </div>
            <button type="submit" class="btn btn-success">Login</button>
        </form>
        <ul class="nav navbar-nav">
            <li><a href="#" data-toggle="collapse" data-target=".navbar-collapse.in" onclick="sidebar.toggle(); return false;"><i class="fa fa-list" style="color: white"></i>&nbsp;&nbsp;Städte</a></li>
            <li><a href="#" data-toggle="collapse" data-target=".navbar-collapse.in" onclick="$('#aboutModal').modal('show'); return false;"><i class="fa fa-globe" style="color: white"></i>&nbsp;&nbsp;Critical Mass</a></li>
            <li><a href="#" data-toggle="collapse" data-target=".navbar-collapse.in" onclick="$('#aboutModal').modal('show'); return false;"><i class="fa fa-dashboard" style="color: white"></i>&nbsp;&nbsp;Statistiken</a></li>
            <li><a href="#" data-toggle="collapse" data-target=".navbar-collapse.in" onclick="$('#aboutModal').modal('show'); return false;"><i class="fa fa-question-circle" style="color: white"></i>&nbsp;&nbsp;Über uns</a></li>
            <li><a href="#" data-toggle="collapse" data-target=".navbar-collapse.in" onclick="$('#loginModal').modal('show'); return false;"><i class="fa fa-user" style="color: white"></i>&nbsp;&nbsp;Dein Profil</a></li>
        </ul>
    </div><!--/.navbar-collapse -->
</div>

<div id="map"></div>
<div id="sidebar">
    <div class="sidebar-wrapper">
        <div class="panel panel-default" style="margin: 0px; border: none; border-radius: 0px; -webkit-box-shadow: none; box-shadow: none;">
            <div class="panel-heading">
                <h3 class="panel-title" style="display: inline;">Critical Mass<button type="button" class="btn btn-xs btn-default pull-right" onclick="sidebar.hide();"><i class="fa fa-chevron-left"></i></button></h3>
            </div>
            <div class="panel-body">
                <div class="sidebar-table">
                    <table class="table table-hover" id="theater-table">
                        <tbody class="list" id="cityList">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="aboutModal" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close" type="button" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Willkommen auf criticalmass.in!</h4>
            </div>
            <div class="modal-body">
                <ul class="nav nav-tabs" id="aboutTabs">
                    <li class="active"><a href="#aboutTabsAbout" data-toggle="tab"><i class="fa fa-question-circle"></i>&nbsp;Über uns</a></li>
                    <li><a href="#aboutTabsContact" data-toggle="tab"><i class="fa fa-envelope"></i>&nbsp;Kontakt</a></li>
                    <li><a href="#aboutTabsImpress" data-toggle="tab"><i class="fa fa-exclamation-circle"></i>&nbsp;Impressum</a></li>
                </ul>
                <div class="tab-content" id="aboutTabsContent" style="padding-top: 10px;">
                    <div id="aboutTabsAbout" class="tab-pane fade active in">
                        <div class="jumbotron" style="background-image: url(https://www.criticalmass.cm/images/header/about-us-hamburg.jpg); background-position: bottom; text-align: right;">
                            <h2 style="color: white; text-shadow: black 0 0 3px;">Hej, wir fahren Fahrrad!</h2>
                            <p style="color: white; text-shadow: black 0 0 3px;">Und wir lieben es. Seit 2011.</p>
                        </div>

                        <p>Auf den Sattel, fertig, los: criticalmass.in zeigt dir, wo</p>
                    </div>

                    <div id="aboutTabsImpress" class="tab-pane fade">
                        <p>criticalmass.in ist ein Projekt an der Fachhochschule Wedel.</p>
                        <p>Fachhochschule Wedel<br />Feldstraße 143<br />22880 Wedel</p>
                        <p><span class="glyphicon glyphicon-envelope"></span> <a href="mailto:malte@criticalmass.in">malte@criticalmass.in</a><br /><span class="glyphicon glyphicon-earphone"></span> 0700 11 864 833</p>
                        <p>Eine Bitte: Wir sind weder an Newslettern, Produktempfehlungen, Partnerprogrammen und ähnlichen Angeboten interessiert. Schickt uns bitte diesbezüglich keine E-Mails und ruft uns auch nicht an. Wir vermitteln auch wirklich keine Pressekontakte zu einzelnen Critical-Mass-Touren.</p>
                    </div>

                    <div id="aboutTabsContact" class="tab-pane fade">
                        <p>Am besten erreichst du uns per E-Mail oder über <a href="https://www.facebook.com/criticalmass.in">unsere Seite auf facebook</a> (Vorsicht, der Link führt zu facebook). Allgemeine Hinweise, Vorschläge und Tipps lesen wir wirklich gerne unter <a href="mailto:mail@criticalmass.in">mail@criticalmass.in</a>.</p>
                        <p>Wegen <strong>fehlerhafter Daten</strong> von Critical-Mass-Touren und <strong>neuen Städten</strong> schreibe uns bitte unter <a href="mailto:ride@criticalmass.in">ride@criticalmass.in</a>.</p>
                        <p><strong>Fehlermeldungen</strong> nehmen wir gerne, aber auch ein ganz bisschen zähneknirschend, unter <a href="mailto:bugs@criticalmass.in">bugs@criticalmass.in</a> entgegen. Schreibe uns bitte in einer solchen Mail, was passiert ist, welchen Browser du benutzt und wenn möglich die genaue Fehlermeldung. Falls du nicht genau weißt, was passiert ist, schreib uns bitte trotzdem: Wir kriegen das schon irgendwie zusammen hin!</p>
                    </div>
                </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade" id="legendModal" tabindex="-1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Map Legend</h4>
            </div>
            <div class="modal-body">
                <p>Map Legend goes here...</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade" id="loginModal" tabindex="-1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Login</h4>
            </div>
            <div class="modal-body">
                <ul class="nav nav-tabs" id="loginTabs">
                    <li class="active"><a href="#loginTabsLogin" data-toggle="tab"><i class="fa fa-question-circle"></i>&nbsp;Anmelden</a></li>
                    <li><a href="#loginTabsRegister" data-toggle="tab"><i class="fa fa-envelope"></i>&nbsp;Registrieren</a></li>
                    <li><a href="#loginTabsPassword" data-toggle="tab"><i class="fa fa-exclamation-circle"></i>&nbsp;Kennwort vergessen</a></li>
                </ul>
                <div class="tab-content" id="loginTabsContent" style="padding-top: 10px;">
                    <div id="loginTabsLogin" class="tab-pane fade active in">
                        {% block fos_user_login %}
                            {% render controller("SonataUserBundle:SecurityFOSUser1:login") %}
                        {% endblock %}
                    </div>

                    <div id="loginTabsRegister" class="tab-pane fade">
                        {% block sonata_user_registration %}
                            {% render controller("SonataUserBundle:RegistrationFOSUser1:register") %}
                        {% endblock %}
                    </div>

                    <div id="loginTabsPassword" class="tab-pane fade">
                        {% block fos_user_resetting %}
                            {% render controller("SonataUserBundle:ResettingFOSUser1:request") %}
                        {% endblock %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="cityInfoModal" tabindex="-1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close" type="button" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title text-primary" id="cityModalTitle"></h4>
            </div>
            <div class="modal-body" id="cityModalBody">
                <ul class="nav nav-tabs" id="cityModalTabs">
                    <li class="active"><a href="#cityModalInfoTab" data-toggle="tab"><i class="fa fa-question-circle"></i>&nbsp;Stadtinfo</a></li>
                    <li><a href="#cityModalRideTab" data-toggle="tab"><i class="fa fa-envelope"></i>&nbsp;Nächste Tour</a></li>
                </ul>

                <div class="tab-content" id="cityModalTabsContent" style="padding-top: 10px;">
                    <div class="tab-pane fade active in" id="cityModalInfoTab">
                        <div class="jumbotron" id="cityModalTabInfoJumbotron">
                            <h2 id="cityModalTabInfoJumbotronTitle">Hello, world!</h2>
                        </div>

                        <h2 id="cityModalTabInfoTitle">Hello, world!</h2>
                        <p id="cityModalTabInfoDescription"></p>
                        <div id="cityModalTabInfoSocialMedia" class="btn-group"></div>
                    </div>

                    <div id="cityModalRideTab" class="tab-pane fade">
                        <div id="cityModalTabNextRideKnown">
                            <div class="jumbotron" id="cityModalTabNextRideJumbotron">
                                <h2 id="cityModalTabNextRideJumbotronTitle" style="color: white; text-shadow: black 0 0 3px;">Hello, world!</h2>
                            </div>

                            <h2 id="cityModalTabNextRideTitle"></h2>
                            <p id="cityModalTabNextRideDescription"></p>

                            <div class="row">
                                <div class="col-md-12" id="cityModalTabNextRideLocation"><strong>Treffpunkt:</strong> <span></span></div>
                            </div>
                            <div class="row">
                                <div class="col-md-6" id="cityModalTabNextRideDate"><strong>Datum:</strong> <time></time></div>
                                <div class="col-md-6" id="cityModalTabNextRideTime"><strong>Uhrzeit:</strong> <time></time></strong></div>
                            </div>

                            <div id="cityModalTabNextRideSocialMedia" class="btn-group"></div>
                            </div>
                        <div id="cityModalTabNextRideUnknown">
                            <div class="alert alert-info" role="alert">Schade — zu dieser Stadt sind uns keine Fahrten bekannt :( Aber wenn du mehr weißt als wir: Schreib uns bitte unter <a href="mailto:ride@criticalmass.in">ride@criticalmass.in</a>!</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Schließen</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade" id="attributionModal" tabindex="-1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close" type="button" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">
                    Developed by <a href='http://bryanmcbride.com'>bryanmcbride.com</a>
                </h4>
            </div>
            <div class="modal-body">
                <div id="attribution"></div>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

{% javascripts '@CalderaCriticalmassCoreBundle/Resources/public/js/external/*'
'@CalderaCriticalmassCoreBundle/Resources/public/js/*'
'@CalderaCriticalmassCoreBundle/Resources/public/js/factories/*'
'@CalderaCriticalmassCoreBundle/Resources/public/js/entities/*'
'@CalderaCriticalmassDesktopBundle/Resources/public/js/external/bootstrap.min.js'
'@CalderaCriticalmassDesktopBundle/Resources/public/js/external/L.activearea.js'
'@CalderaCriticalmassDesktopBundle/Resources/public/js/external/L.Control.Sidebar.js'
'@CalderaCriticalmassDesktopBundle/Resources/public/js/external/leaflet.groupedlayercontrol.js'
'@CalderaCriticalmassDesktopBundle/Resources/public/js/*'
%}
<script type="text/javascript" src="{{ asset_url }}"></script>
{% endjavascripts %}
</body>
</html>
