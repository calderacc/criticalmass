{% extends 'CalderaBundle:Template:StandardTemplate.html.twig' %}

{% block title %}Stadt hinzufügen{% endblock %}
{% block content %}
    <div class="container">

        {{ form_start(form) }}
        {{ form_errors(form) }}

        {% if flow.getCurrentStepNumber() == 1 %}
            <div class="row">
                <div class="col-md-12">
                    <h1>
                        Wähle deine Stadt
                    </h1>

                    <p class="lead">
                        Bitte ziehe auf der folgenden Karte den roten Marker auf den Mittelpunkt der Stadt.
                    </p>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div id="map" style="height: 250px;"></div>
                </div>
            </div>

            <div class="row margin-top-medium">
                <div class="col-md-12">
                    <div class="form-group{% if form_errors(form.city) %} has-error has-feedback{% endif %}">
                        <button id="search-city-button" class="btn btn-default btn-xs pull-right" type="button">
                            <i class="fa fa-map-marker"></i>
                        </button>
                        <label class="control-label" for="">Name:</label>
                        {{ form_widget(form.city, { 'attr' : { 'class': 'form-control'} }) }}
                        <p class="help-block">Name der Stadt, etwa Hamburg oder Rendsburg.</p>
                    </div>
                </div>
            </div>

            {{ form_widget(form.longitude) }}
            {{ form_widget(form.longitude) }}

        {% endif %}




        {% if flow.getCurrentStepNumber == 2 %}
            <div class="row">
                <div class="col-md-12">
                    <h1>
                        Noch mehr Daten deiner Stadt
                    </h1>

                    <p class="lead">
                        Bitte erzähle uns etwas mehr über deine Stadt.
                    </p>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="form-group{% if form_errors(form.title) %} has-error has-feedback{% endif %}">
                        <label class="control-label" for="">Titel:</label>
                        {{ form_widget(form.title, { 'attr' : { 'class': 'form-control'} }) }}
                        <p class="help-block">Gib hier den Titel der Stadt ein, beispielsweise „Critical Mass Hamburg“
                            oder „Fahrradfreitag Rendsburg“.</p>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="form-group{% if form_errors(form.description) %} has-error has-feedback{% endif %}">
                        <label class="control-label" for="">Beschreibung:</label>
                        {{ form_widget(form.description, { 'attr' : { 'class': 'form-control'} }) }}
                        <p class="help-block">Eine kurze, aufs Wesentliche reduzierte Beschreibung der Stadt.</p>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="form-group{% if form_errors(form.punchLine) %} has-error has-feedback{% endif %}">
                        <label class="control-label" for="">Punchline:</label>
                        {{ form_widget(form.punchLine, { 'attr' : { 'class': 'form-control'} }) }}
                        <p class="help-block">Hier kann ein ganz einprägsamer Satz hin. Sowas wie „We are traffic“ oder
                            „Reclaim the streets“ ist ja schon fast Standard.</p>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="form-group{% if form_errors(form.longDescription) %} has-error has-feedback{% endif %}">
                        <label class="control-label" for="">Lange Beschreibung:</label>
                        {{ form_widget(form.longDescription, { 'attr' : { 'class': 'form-control'} }) }}
                        <p class="help-block">Hier ist Platz für eine längere und ausführlichere Beschreibung.</p>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="form-group{% if form_errors(form.cityPopulation) %} has-error has-feedback{% endif %}">
                        <label class="control-label" for="">Einwohnerzahl:</label>
                        {{ form_widget(form.cityPopulation, { 'attr' : { 'class': 'form-control'} }) }}
                        <p class="help-block">Für die Berechnung bestimmter Statistiken wird die Einwohnerzahl einer
                            Stadt benötigt.</p>
                    </div>
                </div>
            </div>
        {% endif %}




        {% if flow.getCurrentStepNumber == 3 %}
            <div class="row">
                <div class="col-md-12">
                    <h1>
                        Soziale Netze
                    </h1>

                    <p class="lead">
                        Meistens tauschen sich die Teilnehmer einer Critical Mass über facebook aus &mdash; bitte
                        verlinke hier eine eventuell vorhandene Webseite, eine Seite auf facebook oder ein
                        twitter-Benutzerkonto.
                    </p>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="form-group{% if form_errors(form.url) %} has-error has-feedback{% endif %}">
                        <label class="control-label" for="">Webseite:</label>
                        {{ form_widget(form.url, { 'attr' : { 'class': 'form-control'} }) }}
                        <p class="help-block">Verlinke eine Webseite über diese Critical Mass.</p>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="form-group{% if form_errors(form.facebook) %} has-error has-feedback{% endif %}">
                        <label class="control-label" for="">Seite auf facebook:</label>
                        {{ form_widget(form.facebook, { 'attr' : { 'class': 'form-control'} }) }}
                        <p class="help-block">Wenn jemand eine Seite auf facebook für diese Critical Mass betreibt,
                            kannst du sie hier verlinken.</p>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="form-group{% if form_errors(form.twitter) %} has-error has-feedback{% endif %}">
                        <label class="control-label" for="">twitter:</label>
                        {{ form_widget(form.twitter, { 'attr' : { 'class': 'form-control'} }) }}
                        <p class="help-block">Link zum twitter-Konto dieser Critical Mass.</p>
                    </div>
                </div>
            </div>
        {% endif %}




        {% if flow.getCurrentStepNumber == 4 %}
            <div class="row">
                <div class="col-md-12">
                    <h1>
                        Regelmäßig unterwegs?
                    </h1>

                    <p class="lead">
                        Wenn die Critical Mass in deiner Stadt regelmäßig unterwegs ist, kannst du die monatlichen
                        Touren automatisch generieren lassen.
                    </p>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div id="map" style="height: 250px;"></div>
                </div>
            </div>

            <div class="row margin-top-medium">
                <div class="col-md-12">
                    <div class="form-group{% if form_errors(form.isStandardable) %} has-error has-feedback{% endif %}">
                        <label class="control-label" for="">Hat regelmäßige Touren:</label>
                        {{ form_widget(form.isStandardable, { 'attr' : { 'class': 'form-control'} }) }}
                        <p class="help-block">Aktiviere diese Checkbox, um vordefinierte Touren für diese Stadt
                            einzutragen.</p>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="form-group{% if form_errors(form.standardDayOfWeek) %} has-error has-feedback{% endif %}">
                        <label class="control-label" for="">Wochentag der Touren:</label>
                        {{ form_widget(form.standardDayOfWeek, { 'attr' : { 'class': 'form-control'} }) }}
                        <p class="help-block">Stelle hier den Wochentag ein, an dem die Touren stattfinden.</p>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="form-group{% if form_errors(form.standardWeekOfMonth) %} has-error has-feedback{% endif %}">
                        <label class="control-label" for="">Woche der Touren:</label>
                        {{ form_widget(form.standardWeekOfMonth, { 'attr' : { 'class': 'form-control'} }) }}
                        <p class="help-block">Wähle hier die Woche, in der die Touren stattfinden.</p>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="form-group{% if form_errors(form.standardTime) %} has-error has-feedback{% endif %}">
                        <label class="control-label" for="">Uhrzeit der Touren:</label>
                        <div class="input-group">
                                <span class="input-group-addon">
                                    {{ form_widget(form.isStandardableTime) }}
                                </span>
                            {% if city != null and city.getIsStandardableTime() %}
                                {{ form_widget(form.standardTime, { 'attr' : { 'class': 'form-control' } }) }}
                            {% else %}
                                {{ form_widget(form.standardTime, { 'attr' : { 'class': 'form-control', 'disabled': 'disabled' } }) }}
                            {% endif %}
                        </div>
                        <p class="help-block">Startzeit der Touren.</p>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="form-group{% if form_errors(form.standardLocation) %} has-error has-feedback{% endif %}">
                        <label class="control-label" for="">Treffpunkt der Touren:</label>
                        <button id="search-location-button" class="btn btn-default btn-xs pull-right" type="button">
                            <i class="fa fa-map-marker"></i>
                        </button>
                        <div class="input-group">
                                <span class="input-group-addon">
                                    {{ form_widget(form.isStandardableLocation) }}
                                </span>
                            {% if city != null and city.getIsStandardableLocation() %}
                                {{ form_widget(form.standardLocation, { 'attr' : { 'class': 'form-control' } }) }}
                            {% else %}
                                {{ form_widget(form.standardLocation, { 'attr' : { 'class': 'form-control', 'disabled': 'disabled' } }) }}
                            {% endif %}
                        </div>
                        <p class="help-block">Gib hier eine aussagekräftige Beschreibung des Treffpunktes ein, von dem
                            diese Tour startet. Ziehe anschließend oben den gelben Marker auf der Karte auf diesen
                            Treffpunkt.</p>
                    </div>
                </div>
            </div>
        {% endif %}




        {% if flow.getCurrentStepNumber == 5 %}
            <div class="row">
                <div class="col-md-12">
                    <h1>
                        Technisches
                    </h1>

                    <p class="lead">
                        Du hst es fast geschafft: Bitte wähle jetzt noch die Zeitzone deiner Stadt und gib an, ob auf
                        criticalmass.in ein Forum für diese Stadt angezeigt werden soll.
                    </p>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <label class="control-label" for="">Zeitzone:</label>
                        {{ form_widget(form.timezone, { 'attr' : { 'class': 'form-control'} }) }}
                        <p class="help-block">Wähle die Zeitzone dieser Stadt aus.</p>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <label class="control-label" for="">Forum anzeigen:</label>
                        {{ form_widget(form.enableBoard, { 'attr' : { 'class': 'form-control'} }) }}
                        <p class="help-block">Aktiviere diese Checkbox, um ein Diskussionsforum für diese Stadt zu
                            aktivieren.</p>
                    </div>
                </div>
            </div>
        {% endif %}



        {#
        {% if flow.getCurrentStepNumber == 6 %}
            <div class="row">
                <div class="col-md-12">
                    <h2>Header-Grafik</h2>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <label class="control-label" for="">Datei:</label>
                        {{ form_widget(form.imageFile, { 'attr' : { 'class': 'form-control'} }) }}
                        <p class="help-block">Lade hier ein Foto für diese Stadt hoch. <strong>Bitte beachte, dass du das Urheber- oder Nutzungsrecht an dieser Datei besitzt.</strong> Am besten sind Bildabmessungen von 2.280 mal 500 Pixel.</p>
                    </div>
                </div>
            </div>
        {% endif %}
        #}



        {{ form_rest(form) }}

        {% include 'CraueFormFlowBundle:FormFlow:buttons.html.twig' with {
        craue_formflow_button_class_last: 'btn btn-success',
        craue_formflow_button_class_back: 'btn btn-default',
        craue_formflow_button_class_reset: 'btn btn-default',
        } %}

        {{ form_end(form) }}
    </div>

    <script type="text/javascript">
        var options = {
            country: '{{ country }}',
            state: '{{ state }}'
        };

        CriticalMass.loadModule('EditCityPage', options, null);
    </script>
{% endblock %}