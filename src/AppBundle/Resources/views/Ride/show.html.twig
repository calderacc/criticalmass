{% extends 'CalderaBundle:Template:StandardTemplate.html.twig' %}

{% block title %}{{ ride.getFancyTitle() }}{% endblock %}

{% block breadcrumb %}
    <li>
        <a href="{{ path('caldera_criticalmass_desktop_city_list') }}">
            St√§dteliste
        </a>
    </li>
    <li>
        <a href="{{ objectPath(city) }}">
            {{ city.city }}
        </a>
    </li>
    <li class="active">
        {{ ride.getFancyTitle() }}
    </li>
{% endblock %}

{% set currentPath = url(app.request.attributes.get('_route'), app.request.attributes.get('_route_params')) %}

{% block additionalHeaderElements %}
    <meta property="og:title" content="{{ ride.fancyTitle }}"/>
    <meta property="og:type" content="Website"/>
    <meta property="og:description" content="{{ ride.description }}"/>
    <meta property="og:url" content="{{ currentPath }}"/>
    <meta property="og:locale" content="de_DE"/>
    <meta property="og:site_name" content="criticalmass.in"/>
    {% if ride.featuredPhoto %}
        <meta property="og:image"
              content="{{ vich_uploader_asset(ride.featuredPhoto, 'imageFile')|imagine_filter('facebook_preview_image') }}"/>
    {% endif %}
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:site" content="@calderacc"/>
    <meta name="twitter:creator" content="@maltehuebner"/>
    <meta name="twitter:title" content="{{ ride.fancyTitle }}"/>
    <meta name="twitter:description" content="{{ ride.description }}"/>
    {% if ride.featuredPhoto %}
        <meta name="twitter:image"
              content="{{ vich_uploader_asset(ride.featuredPhoto, 'imageFile')|imagine_filter('twitter_summary_large_image') }}"/>
    {% endif %}
{% endblock %}

{% block content %}
    <div class="container">
        {% if today(ride.date) %}
            {% include('CalderaBundle:Ride:Includes/_liveHint.html.twig') with { 'city': city } %}
        {% else %}
            {% include('CalderaBundle:Ride:Includes/_registrationHint.html.twig') %}
        {% endif %}

        {% include('CalderaBundle:Ride:Ride.html.twig') with { 'ride': ride, 'tracks': tracks, 'participation': participation } %}

        {% include('CalderaBundle:Ride:Includes/_pagination.html.twig') with { 'previousRide': previousRide, 'nextRide': nextRide } %}
    </div>
{% endblock %}
