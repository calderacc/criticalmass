{% import 'Bootstrap/bootstrap_macros.html.twig' as bootstrap %}

<div class="row mt-2">
    <div class="col-12">
        <div class="btn-group pull-right mt-0">
        {% if app.user %}
            {{ bootstrap.dropdown('<i class="fa fa-cogs"></i> Tour bearbeiten', [
                { href: objectPath(ride, 'caldera_criticalmass_ride_edit'), caption: 'Tour bearbeiten' },
                { href: objectPath(ride, 'criticalmass_socialnetwork_ride_list'), caption: 'soziale Netzwerke verwalten' },
                { href: objectPath(ride, 'caldera_criticalmass_ride_socialpreview'), caption: 'Vorschau f端r soziale Netzwerke' },
            ], 'btn-primary', false) }}
        {% else %}
            <span class="btn btn-primary modal-hint" data-modal-hint-title="{{ 'hint_modal.ride.edit_button.title'|trans }}" data-modal-hint-text="{{ 'hint_modal.ride.edit_button.text'|trans({'%city%': ride.city.city, '%dateTime%': ride.dateTime|date('d.m.Y')}) }}" data-hint-modal-size="md">
                <i class="fa fa-cogs"></i> Tour editieren
            </span>
        {% endif %}
        </div>

        <h3 class="mt-0">
            {{ ride.title }}
        </h3>
    </div>
</div>

<div class="row mt-2">
    <div class="col-12 col-sm-4">
        {% if today(ride.dateTime) %}
        <div class="row mb-2">
            <div class="col-12">
                {% include 'Ride/Includes/_live.html.twig' with { 'ride': ride } %}
            </div>
        </div>
        {% endif %}

        <div class="row mb-2">
            <div class="col-12">
                {% include 'Ride/Includes/_rideDetails.html.twig' with { 'ride': ride, 'weatherForecast': weatherForecast, 'location': location } %}
            </div>
        </div>

        <div class="row mb-2">
            <div class="col-12">
                {% include 'Ride/Includes/_socialMedia.html.twig' with { 'ride': ride } %}
            </div>
        </div>

        <div class="row">
            <div class="col-12">
                {% include 'Ride/Includes/_statistic.html.twig' with { 'ride': ride } %}
            </div>
        </div>
    </div>

    {% if ride.description %}
        <div itemprop="description" class="col-12 col-sm-8">
            {{ ride.description|markdown }}
        </div>
        {% else %}
        <div class="col-12 col-sm-8">
            <div class="alert alert-info">
                <strong>Huch?</strong>

                <p>
                    Schade, bislang hat noch niemand Informationen 端ber diese Tour hinterlegt. Wenn du Lust und Zeit hast, kannst du {{ ride.title }} <a href="{{ objectPath(ride, 'caldera_criticalmass_ride_edit') }}">hier editieren</a>:
                </p>

                <ul>
                    <li>
                        Gibt es ein Motto f端r diese Tour?
                    </li>

                    <li>
                        Gibt es irgendwelche Neuigkeiten oder Termine f端r den Radverkehr?
                    </li>

                    <li>
                        Oder, auch immer ganz wichtig: Wie wird das Wetter?
                    </li>
                </ul>

                <p class="text-center mt-3">
                    <a href="{{ objectPath(ride, 'caldera_criticalmass_ride_edit') }}"
                       class="btn btn-primary btn-lg">
                        Tour editieren
                    </a>
                </p>
            </div>
        </div>
    {% endif %}
</div>
